{"version":3,"file":"plugin.mjs","sources":["../../../../src/plugins/nftModule/plugin.ts"],"sourcesContent":["import { cusper, PROGRAM_ID } from '@metaplex-foundation/mpl-token-metadata';\nimport { ProgramClient } from '../programModule';\nimport { NftClient } from './NftClient';\nimport {\n  approveNftCollectionAuthorityOperation,\n  approveNftCollectionAuthorityOperationHandler,\n  approveNftDelegateOperation,\n  approveNftDelegateOperationHandler,\n  approveNftUseAuthorityOperation,\n  approveNftUseAuthorityOperationHandler,\n  createNftOperation,\n  createNftOperationHandler,\n  createSftOperation,\n  createSftOperationHandler,\n  deleteNftOperation,\n  deleteNftOperationHandler,\n  findNftByMetadataOperation,\n  findNftByMetadataOperationHandler,\n  findNftByMintOperation,\n  findNftByMintOperationHandler,\n  findNftByTokenOperation,\n  findNftByTokenOperationHandler,\n  findNftsByCreatorOperation,\n  findNftsByCreatorOperationHandler,\n  findNftsByMintListOperation,\n  findNftsByMintListOperationHandler,\n  findNftsByOwnerOperation,\n  findNftsByOwnerOperationHandler,\n  findNftsByUpdateAuthorityOperation,\n  findNftsByUpdateAuthorityOperationHandler,\n  freezeDelegatedNftOperation,\n  freezeDelegatedNftOperationHandler,\n  loadMetadataOperation,\n  loadMetadataOperationHandler,\n  lockNftOperation,\n  lockNftOperationHandler,\n  migrateToSizedCollectionNftOperation,\n  migrateToSizedCollectionNftOperationHandler,\n  mintNftOperation,\n  mintNftOperationHandler,\n  printNewEditionOperation,\n  printNewEditionOperationHandler,\n  revokeNftCollectionAuthorityOperation,\n  revokeNftCollectionAuthorityOperationHandler,\n  revokeNftDelegateOperation,\n  revokeNftDelegateOperationHandler,\n  revokeNftUseAuthorityOperation,\n  revokeNftUseAuthorityOperationHandler,\n  thawDelegatedNftOperation,\n  thawDelegatedNftOperationHandler,\n  transferNftOperation,\n  transferNftOperationHandler,\n  unlockNftOperation,\n  unlockNftOperationHandler,\n  unverifyNftCollectionOperation,\n  unverifyNftCollectionOperationHandler,\n  unverifyNftCreatorOperation,\n  unverifyNftCreatorOperationHandler,\n  updateNftOperation,\n  updateNftOperationHandler,\n  uploadMetadataOperation,\n  uploadMetadataOperationHandler,\n  useNftOperation,\n  useNftOperationHandler,\n  verifyNftCollectionOperation,\n  verifyNftCollectionOperationHandler,\n  verifyNftCreatorOperation,\n  verifyNftCreatorOperationHandler,\n} from './operations';\nimport { ErrorWithLogs, MetaplexPlugin, Program } from '@/types';\nimport type { Metaplex } from '@/Metaplex';\n\n/** @group Plugins */\nexport const nftModule = (): MetaplexPlugin => ({\n  install(metaplex: Metaplex) {\n    // Token Metadata Program.\n    const tokenMetadataProgram = {\n      name: 'TokenMetadataProgram',\n      address: PROGRAM_ID,\n      errorResolver: (error: ErrorWithLogs) =>\n        cusper.errorFromProgramLogs(error.logs, false),\n    };\n    metaplex.programs().register(tokenMetadataProgram);\n    metaplex.programs().getTokenMetadata = function (\n      this: ProgramClient,\n      programs?: Program[]\n    ) {\n      return this.get(tokenMetadataProgram.name, programs);\n    };\n\n    // Operations.\n    const op = metaplex.operations();\n    op.register(\n      approveNftCollectionAuthorityOperation,\n      approveNftCollectionAuthorityOperationHandler\n    );\n    op.register(\n      approveNftDelegateOperation,\n      approveNftDelegateOperationHandler\n    );\n    op.register(\n      approveNftUseAuthorityOperation,\n      approveNftUseAuthorityOperationHandler\n    );\n    op.register(createNftOperation, createNftOperationHandler);\n    op.register(createSftOperation, createSftOperationHandler);\n    op.register(deleteNftOperation, deleteNftOperationHandler);\n    op.register(findNftByMetadataOperation, findNftByMetadataOperationHandler);\n    op.register(findNftByMintOperation, findNftByMintOperationHandler);\n    op.register(findNftByTokenOperation, findNftByTokenOperationHandler);\n    op.register(findNftsByCreatorOperation, findNftsByCreatorOperationHandler);\n    op.register(\n      findNftsByMintListOperation,\n      findNftsByMintListOperationHandler\n    );\n    op.register(findNftsByOwnerOperation, findNftsByOwnerOperationHandler);\n    op.register(\n      findNftsByUpdateAuthorityOperation,\n      findNftsByUpdateAuthorityOperationHandler\n    );\n    op.register(\n      freezeDelegatedNftOperation,\n      freezeDelegatedNftOperationHandler\n    );\n    op.register(loadMetadataOperation, loadMetadataOperationHandler);\n    op.register(lockNftOperation, lockNftOperationHandler);\n    op.register(\n      migrateToSizedCollectionNftOperation,\n      migrateToSizedCollectionNftOperationHandler\n    );\n    op.register(mintNftOperation, mintNftOperationHandler);\n    op.register(printNewEditionOperation, printNewEditionOperationHandler);\n    op.register(\n      revokeNftCollectionAuthorityOperation,\n      revokeNftCollectionAuthorityOperationHandler\n    );\n    op.register(revokeNftDelegateOperation, revokeNftDelegateOperationHandler);\n    op.register(\n      revokeNftUseAuthorityOperation,\n      revokeNftUseAuthorityOperationHandler\n    );\n    op.register(thawDelegatedNftOperation, thawDelegatedNftOperationHandler);\n    op.register(transferNftOperation, transferNftOperationHandler);\n    op.register(unlockNftOperation, unlockNftOperationHandler);\n    op.register(\n      unverifyNftCollectionOperation,\n      unverifyNftCollectionOperationHandler\n    );\n    op.register(\n      unverifyNftCreatorOperation,\n      unverifyNftCreatorOperationHandler\n    );\n    op.register(updateNftOperation, updateNftOperationHandler);\n    op.register(uploadMetadataOperation, uploadMetadataOperationHandler);\n    op.register(useNftOperation, useNftOperationHandler);\n    op.register(\n      verifyNftCollectionOperation,\n      verifyNftCollectionOperationHandler\n    );\n    op.register(verifyNftCreatorOperation, verifyNftCreatorOperationHandler);\n\n    metaplex.nfts = function () {\n      return new NftClient(this);\n    };\n  },\n});\n\ndeclare module '../../Metaplex' {\n  interface Metaplex {\n    nfts(): NftClient;\n  }\n}\n\ndeclare module '../programModule/ProgramClient' {\n  interface ProgramClient {\n    getTokenMetadata(programs?: Program[]): Program;\n  }\n}\n"],"names":["nftModule","install","metaplex","tokenMetadataProgram","name","address","PROGRAM_ID","errorResolver","error","cusper","errorFromProgramLogs","logs","programs","register","getTokenMetadata","get","op","operations","approveNftCollectionAuthorityOperation","approveNftCollectionAuthorityOperationHandler","approveNftDelegateOperation","approveNftDelegateOperationHandler","approveNftUseAuthorityOperation","approveNftUseAuthorityOperationHandler","createNftOperation","createNftOperationHandler","createSftOperation","createSftOperationHandler","deleteNftOperation","deleteNftOperationHandler","findNftByMetadataOperation","findNftByMetadataOperationHandler","findNftByMintOperation","findNftByMintOperationHandler","findNftByTokenOperation","findNftByTokenOperationHandler","findNftsByCreatorOperation","findNftsByCreatorOperationHandler","findNftsByMintListOperation","findNftsByMintListOperationHandler","findNftsByOwnerOperation","findNftsByOwnerOperationHandler","findNftsByUpdateAuthorityOperation","findNftsByUpdateAuthorityOperationHandler","freezeDelegatedNftOperation","freezeDelegatedNftOperationHandler","loadMetadataOperation","loadMetadataOperationHandler","lockNftOperation","lockNftOperationHandler","migrateToSizedCollectionNftOperation","migrateToSizedCollectionNftOperationHandler","mintNftOperation","mintNftOperationHandler","printNewEditionOperation","printNewEditionOperationHandler","revokeNftCollectionAuthorityOperation","revokeNftCollectionAuthorityOperationHandler","revokeNftDelegateOperation","revokeNftDelegateOperationHandler","revokeNftUseAuthorityOperation","revokeNftUseAuthorityOperationHandler","thawDelegatedNftOperation","thawDelegatedNftOperationHandler","transferNftOperation","transferNftOperationHandler","unlockNftOperation","unlockNftOperationHandler","unverifyNftCollectionOperation","unverifyNftCollectionOperationHandler","unverifyNftCreatorOperation","unverifyNftCreatorOperationHandler","updateNftOperation","updateNftOperationHandler","uploadMetadataOperation","uploadMetadataOperationHandler","useNftOperation","useNftOperationHandler","verifyNftCollectionOperation","verifyNftCollectionOperationHandler","verifyNftCreatorOperation","verifyNftCreatorOperationHandler","nfts","NftClient"],"mappings":"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"}